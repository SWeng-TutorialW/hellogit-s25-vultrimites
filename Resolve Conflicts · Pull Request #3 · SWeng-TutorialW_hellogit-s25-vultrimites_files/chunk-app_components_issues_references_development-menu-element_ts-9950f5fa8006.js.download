"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_issues_references_development-menu-element_ts"],{70170:(e,t,r)=>{function n(e,t=0,{start:r=!0,middle:s=!0,once:i=!1}={}){let o,l=r,u=0,a=!1;function c(...n){if(a)return;let d=Date.now()-u;u=Date.now(),r&&s&&d>=t&&(l=!0),l?(l=!1,e.apply(this,n),i&&c.cancel()):(s&&d<t||!s)&&(clearTimeout(o),o=setTimeout(()=>{u=Date.now(),e.apply(this,n),i&&c.cancel()},s?t-d:t))}return c.cancel=()=>{clearTimeout(o),a=!0},c}function s(e,t=0,{start:r=!1,middle:i=!1,once:o=!1}={}){return n(e,t,{start:r,middle:i,once:o})}r.d(t,{n:()=>n,s:()=>s})},12301:(e,t,r)=>{r.r(t);var n=r(39595);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}let{getItem:o,setItem:l}=(0,r(80688).A)("localStorage"),u=class DevelopmentMenuElement extends HTMLElement{branchAndPullRequestListLoaded(){this.originalCheckedPullRequestIds=this.checkedPullRequestIds(),this.originalCheckedBranchIds=this.checkedBranchIds(),this.applyButton.disabled=!0,this.branchAndPullRequestListLoadEnd()}branchAndPullRequestListLoadStart(){this.branchAndPullRequestSearchInput.value?(this.branchAndPullRequestListSpinner.setAttribute("hidden","true"),this.branchAndPullRequestSearchInput.removeAttribute("is-loading")):(this.branchAndPullRequestList.textContent="",this.branchAndPullRequestListSpinner.removeAttribute("hidden"),this.branchAndPullRequestSearchInput.setAttribute("is-loading","true"))}branchAndPullRequestListLoadEnd(){this.branchAndPullRequestListSpinner.setAttribute("hidden","true"),this.branchAndPullRequestSearchInput.removeAttribute("is-loading")}repositoryListLoaded(){this.repositoryListLoadEnd()}repositoryListLoadStart(){this.repoSearchInput.value?(this.repositoryListSpinner.setAttribute("hidden","true"),this.repoSearchInput.removeAttribute("is-loading")):(this.repositoryList.textContent="",this.repositoryListSpinner.removeAttribute("hidden"),this.repoSearchInput.setAttribute("is-loading","true"))}repositoryListLoadEnd(){this.repositoryListSpinner.setAttribute("hidden","true"),this.repoSearchInput.removeAttribute("is-loading")}openBranchOrPullRequestDialog(e){e.preventDefault(),e.stopPropagation();let t=e.currentTarget,r=this.details.getAttribute("current-user")||"",n=this.details.getAttribute("current-issue-or-pull-request-number")||"",s=this.details.getAttribute("repo-nwo")||"",i=t?.getAttribute("selected-repo-nwo")||"",o=t?.getAttribute("selected-repo-id")||"",l=t?.getAttribute("selected-repo-url")||"";this.setRepo({currentUser:r,currentIssueOrPullRequestNumber:n,repoNwo:s,selectedRepoNwo:i,selectedRepoId:o,selectedRepoUrl:l}),this.toggleMenus()}toggleMenus(){this.details.open=!0,this.repoMenu.toggleAttribute("hidden"),this.branchOrPullRequestDialog.toggleAttribute("hidden"),this.repoMenu.hidden?this.branchAndPullRequestSearchInput.focus():this.repoSearchInput.focus()}openSecondLevelMenu(){this.details.open=!0,this.repoMenu.hidden=!0,this.branchOrPullRequestDialog.hidden=!1}openSelectedRepoFromStorage(e){let t=this.getSelectedReposLocalStorage(),r=this.details.getAttribute("current-user")||"",n=this.details.getAttribute("current-issue-or-pull-request-number")||"",s=this.details.getAttribute("repo-nwo")||"",i=t?.find(e=>e.currentUser===r&&e.currentIssueOrPullRequestNumber===n&&e.repoNwo===s);if(i&&!this.isDetailsOpen()){let{selectedRepoNwo:t,selectedRepoId:o,selectedRepoUrl:l}=i;this.openSecondLevelMenu(),this.setRepo({currentUser:r,currentIssueOrPullRequestNumber:n,repoNwo:s,selectedRepoNwo:t,selectedRepoId:o,selectedRepoUrl:l}),e.preventDefault(),e.stopPropagation()}}closeMenu(){this.details.open=!1}closeBranchOrPullRequestDialog(){this.removeSelectedRepoLocalStorage({currentUser:this.currentUser,currentIssueOrPullRequestNumber:this.currentIssueOrPullRequestNumber,repoNwo:this.repoNwo,selectedRepoNwo:this.selectedRepoNwo,selectedRepoId:this.selectedRepoId,selectedRepoUrl:this.selectedRepoUrl}),this.selectedRepoNwo="",this.branchAndPullRequestList.textContent="",this.toggleMenus()}toggleSelectBranch(e){this.toggleSelectBranchOrPullRequest(e,"label.js-branch-list-item"),this.setApplyButtonStatus()}toggleSelectPullRequest(e){let t=this.atLimit();this.atLimitMessage.hidden=!t,this.toggleSelectBranchOrPullRequest(e,"label.js-pull-request-list-item"),this.toggleUnselectedItemsDisabled(t),this.setApplyButtonStatus()}toggleSelectBranchOrPullRequest(e,t="label"){let r=e.target,n=r.closest(t);n?.setAttribute("aria-checked",String(r.checked))}toggleUnselectedItemsDisabled(e){for(let t of this.pullRequestInputsList){let r=t.closest("label");r?.setAttribute("aria-disabled",String(e&&!t.checked))}}stopPropagation(e){e.stopPropagation()}isDetailsOpen(){return this.details.open}atLimit(){let e=this.linkableItemList.getAttribute("menu-max-options")||"",t=this.checkedPullRequestIds(),r=this.originalCheckedPullRequestIds;return t.length-r.length>=Number(e)}areArraysEqual(e,t){return JSON.stringify(e.sort())===JSON.stringify(t.sort())}setApplyButtonStatus(){this.areArraysEqual(this.originalCheckedPullRequestIds,this.checkedPullRequestIds())&&this.areArraysEqual(this.originalCheckedBranchIds,this.checkedBranchIds())?this.applyButton.disabled=!0:this.applyButton.disabled=!1}setRepo(e){let{currentUser:t,currentIssueOrPullRequestNumber:r,repoNwo:n,selectedRepoNwo:s,selectedRepoId:i,selectedRepoUrl:o}=e;this.setSelectedRepoLocalStorage(e),this.dialogTitle.innerHTML=s,this.currentUser=t,this.currentIssueOrPullRequestNumber=r,this.repoNwo=n,this.selectedRepoNwo=s,this.selectedRepoId=i,this.selectedRepoUrl=o,this.selectedRepoIdInput.value=i,this.branchAndPullRequestSearch.src=o,this.branchAndPullRequestSearchInput.focus()}getSelectedReposLocalStorage(){return JSON.parse(o(this.STORAGE_KEY)||"[]")}setSelectedRepoLocalStorage(e){let t=this.softRemoveSelectedRepoLocalStorage(e).slice(0,this.MAX_SELECTED_REPOS-1);t.unshift(e),l(this.STORAGE_KEY,JSON.stringify(t))}softRemoveSelectedRepoLocalStorage(e){return this.getSelectedReposLocalStorage().filter(t=>t.selectedRepoNwo!==e.selectedRepoNwo&&t.repoNwo!==e.repoNwo&&t.currentUser===e.currentUser)}removeSelectedRepoLocalStorage(e){let t=this.softRemoveSelectedRepoLocalStorage(e);l(this.STORAGE_KEY,JSON.stringify(t))}resetForm(){this.closeMenu()}checkedPullRequestIds(){return this.pullRequestInputsList.filter(e=>e.checked).map(e=>e.value)}checkedBranchIds(){return this.branchInputsList.filter(e=>e.checked).map(e=>e.value)}constructor(...e){super(...e),s(this,"currentUser",""),s(this,"currentIssueOrPullRequestNumber",""),s(this,"repoNwo",""),s(this,"selectedRepoNwo",""),s(this,"selectedRepoId",""),s(this,"selectedRepoUrl",""),s(this,"originalCheckedPullRequestIds",[]),s(this,"originalCheckedBranchIds",[]),s(this,"STORAGE_KEY","developmentMenu:selectedRepos"),s(this,"MAX_SELECTED_REPOS",100)}};i([n.aC],u.prototype,"details",void 0),i([n.aC],u.prototype,"repoMenu",void 0),i([n.aC],u.prototype,"branchOrPullRequestDialog",void 0),i([n.aC],u.prototype,"dialogTitle",void 0),i([n.aC],u.prototype,"branchAndPullRequestSearch",void 0),i([n.aC],u.prototype,"repoSearchInput",void 0),i([n.aC],u.prototype,"branchAndPullRequestSearchInput",void 0),i([n.aC],u.prototype,"repositoryListSpinner",void 0),i([n.aC],u.prototype,"branchAndPullRequestListSpinner",void 0),i([n.aC],u.prototype,"repositoryList",void 0),i([n.aC],u.prototype,"branchAndPullRequestList",void 0),i([n.aC],u.prototype,"linkableItemList",void 0),i([n.aC],u.prototype,"selectedRepoIdInput",void 0),i([n.aC],u.prototype,"atLimitMessage",void 0),i([n.aC],u.prototype,"applyButton",void 0),i([n.zV],u.prototype,"pullRequestInputsList",void 0),i([n.zV],u.prototype,"branchInputsList",void 0),u=i([n.p_],u)},56176:(e,t,r)=>{let n;function s(){if(!n)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return n}function i(){return n?.locale??"en-US"}function o(){return!!s().login}r.d(t,{JK:()=>i,M3:()=>o,_$:()=>s}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{n=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},75028:(e,t,r)=>{r.d(t,{G:()=>s,K:()=>i});var n=r(47584);let s=n.XC?.readyState==="interactive"||n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),i=n.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{n.cg?.addEventListener("load",e)})},75632:(e,t,r)=>{r.d(t,{G7:()=>u,XY:()=>a,fQ:()=>l});var n=r(5225),s=r(56176);function i(){return new Set((0,s._$)().featureFlags.map(e=>e.toLowerCase()))}let o=r(47584).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?i:(0,n.A)(i);function l(){return Array.from(o())}function u(e){return o().has(e.toLowerCase())}let a={isFeatureEnabled:u}},9080:(e,t,r)=>{r.d(t,{k:()=>o,v:()=>l});var n=r(5225),s=r(47584);let i=(0,n.A)(function(){return s.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,n.A)(function(){return"enterprise"===i()}),l="webpack"},80688:(e,t,r)=>{r.d(t,{A:()=>o,D:()=>l});var n=r(47584),s=r(57516);let i=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},r=n.cg,l=e=>e,u=e=>e){let a;try{if(!r)throw Error();a=r[e]||new i}catch{a=new i}let{throwQuotaErrorsOnSet:c}=t;function d(e){t.sendCacheStats&&(0,s.i)({incrementKey:e})}function h(e){try{if(a.removeItem(e),t.ttl){let t=`${e}:expiry`;a.removeItem(t)}}catch{}}return{getItem:function(e,t=Date.now()){try{let r=a.getItem(e);if(!r)return null;let n=`${e}:expiry`,s=Number(a.getItem(n));if(s&&t>s)return h(e),h(n),d("SAFE_STORAGE_VALUE_EXPIRED"),null;return d("SAFE_STORAGE_VALUE_WITHIN_TTL"),l(r)}catch{return null}},setItem:function(e,r,n=Date.now()){try{if(a.setItem(e,u(r)),t.ttl){let r=`${e}:expiry`,s=n+t.ttl;a.setItem(r,s.toString())}}catch(e){if(c&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:h,clear:a.clear,key:a.key,get length(){return a.length}}}function l(e){return o(e,{throwQuotaErrorsOnSet:!1},n.cg,JSON.parse,JSON.stringify)}},47584:(e,t,r)=>{r.d(t,{KJ:()=>n.KJ,Kn:()=>s.Kn,X3:()=>n.X3,XC:()=>s.XC,cg:()=>s.cg,fV:()=>s.fV,g5:()=>n.g5});var n=r(25992),s=r(39833)},39833:(e,t,r)=>{r.d(t,{Kn:()=>o,XC:()=>s,cg:()=>i,fV:()=>l});let n="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,s="undefined"==typeof document||n?void 0:document,i="undefined"==typeof window||n?void 0:window,o="undefined"==typeof history||n?void 0:history,l="undefined"==typeof location||n?{pathname:"",origin:"",search:"",hash:"",href:""}:location},25992:(e,t,r)=>{r.d(t,{KJ:()=>i,X3:()=>s,g5:()=>o});var n=r(39833);let s=void 0===n.XC,i=!s;function o(){return!!s||!n.XC||!!(n.XC.querySelector('react-app[data-ssr="true"]')||n.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},57516:(e,t,r)=>{r.d(t,{X:()=>g,i:()=>c});var n=r(47584),s=r(75028),i=r(9080),o=r(75632),l=r(56176),u=r(70170);let a=[];function c(e,t=!1,r=.5){if(!n.X3&&!0!==(0,o.G7)("BROWSER_STATS_DISABLED")){if(r<0||r>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,l.M3)(),e.staff=g(),e.bundler=i.v,Math.random()<r&&a.push(e),t?p():h()}}let d=null,h=(0,u.n)(async function(){await s.K,null==d&&(d=window.requestIdleCallback(p))},5e3);function p(){if(d=null,!a.length)return;let e=n.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],r=e.map(e=>JSON.stringify(e));for(;r.length>0;)t.push(function(e){let t=e.shift(),r=[t],n=t.length;for(;e.length>0&&n<=65536;){let t=e[0].length;if(n+t<=65536){let s=e.shift();r.push(s),n+=t}else break}return r}(r));return t}(a))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);a=[]}}function g(){return!!n.XC?.head?.querySelector('meta[name="user-staff"]')?.content}n.XC?.addEventListener("pagehide",p),n.XC?.addEventListener("visibilitychange",p)},5225:(e,t,r)=>{function n(...e){return JSON.stringify(e,(e,t)=>"object"==typeof t?t:String(t))}function s(e,t={}){let{hash:r=n,cache:i=new Map}=t;return function(...t){let n=r.apply(this,t);if(i.has(n))return i.get(n);let s=e.apply(this,t);return s instanceof Promise&&(s=s.catch(e=>{throw i.delete(n),e})),i.set(n,s),s}}r.d(t,{A:()=>s})}}]);
//# sourceMappingURL=app_components_issues_references_development-menu-element_ts-db1aaa4f74a8.js.map